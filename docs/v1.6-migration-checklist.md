# üìã v1.6 Component Migration Checklist

**Migration Phase:** Template Subcomponent Extraction  
**Status:** STAGED  
**Base Version:** v1.5.0  
**Target:** TemplateForm.tsx isolation

---

## üéØ Template Mode Extraction Checklist

### **Pre-Migration Verification**
- [ ] Capture screenshot of current Template mode UI
- [ ] Document all 15 Template-specific fields
- [ ] Map all conditional rendering rules
- [ ] List all tooltip texts
- [ ] Record field validation states
- [ ] Note all helper text content
- [ ] Document section organization

---

## üìù Template Mode Field Preservation Map

### **Section 1: Prompt Basics**
```
Fields to Extract:
1. goal* (required)
   - Label: "What do you want to achieve?"
   - Helper: "Be specific about your desired outcome"
   - Example: "e.g., Generate a sales email that converts..."
   - Validation: min(10), max(500)
   - Tooltip: Present

2. keyOffer (optional)
   - Label: "Key Offer / Value Proposition"
   - Helper: "What makes this unique or valuable?"
   - Example: "e.g., 50% discount for early adopters..."
   - Validation: min(5), max(200)
   - Tooltip: Present
```

### **Section 2: Target Audience & Use Case**
```
Fields to Extract:
3. audience* (required)
   - Label: "Target Audience"
   - Helper: "Who will interact with this AI?"
   - Example: "e.g., Marketing managers at tech startups..."
   - Validation: min(5), max(200)
   - Grid Position: Left
   - Tooltip: Present

4. tone (select)
   - Label: "Tone"
   - Options: casual, professional, academic, creative, technical, empathetic, authoritative, friendly
   - Default: professional
   - Grid Position: Right
   - Helper: "Set the communication style"
```

### **Section 3: Output Style & Format**
```
Fields to Extract:
5. industry (optional)
   - Label: "Industry"
   - Helper: "Sector or domain context"
   - Example: "e.g., Healthcare, Finance, E-commerce..."
   - Grid Position: Left (md:grid-cols-3)

6. experienceLevel (select, optional)
   - Label: "Experience Level"
   - Options: beginner, intermediate, advanced, expert
   - Helper: "Complexity of the output"
   - Grid Position: Center

7. outputFormat (optional)
   - Label: "Output Format"
   - Helper: "Structure of the response"
   - Example: "e.g., Bullet points, Essay, Code..."
   - Grid Position: Right
```

### **Section 4: AI Model Selection & Advanced (NEW v1.5 fields)**
```
Fields to Extract:
8. aiModels (multi-select)
   - Label: "Target AI Platform(s)"
   - Options: claude-3-opus, claude-3-sonnet, claude-3-haiku, gpt-4, gpt-4-turbo, gpt-3.5-turbo, gemini-pro, llama-2
   - Helper: "Select one or more AI models"
   - Default: ['claude-3-sonnet']

9. platformVersion (optional, NEW)
   - Label: "Platform Version"
   - Helper: "Specific version if needed"
   - Example: "e.g., v2.0, v3.5..."
   - Validation: pattern(/^v?\d+\.\d+/)

10. useCaseCategory (select, optional, NEW)
    - Label: "Use Case Category"
    - Options: content-creation, analysis, coding, customer-service, education, research, creative-writing
    - Helper: "Primary purpose category"

11. finalOutputFormat (select, optional, NEW)
    - Label: "Final Output Format"
    - Options: text, markdown, json, xml, code, structured-data
    - Helper: "Technical format preference"

12. audienceSensitivity (select, optional, NEW)
    - Label: "Audience Sensitivity"
    - Options: low, medium, high
    - Helper: "Content filtering level"
    - Default: medium
```

### **Section 5: Advanced Settings (Collapsible)**
```
Fields to Extract:
13. citationNeeded (checkbox)
    - Label: "Needs Citations"
    - Helper: "Include source references"
    - Conditional: Shows citation style when checked

14. rubricMode (select)
    - Label: "Evaluation Rubric"
    - Options: strict, balanced, flexible
    - Helper: "How closely to follow guidelines"

15. clarityLevel (select)
    - Label: "Clarity Level"
    - Options: simple, standard, technical
    - Helper: "Language complexity"
```

---

## ‚úÖ Acceptance Criteria

### **Visual Preservation**
- [ ] Card component with p-6 padding maintained
- [ ] Section header with blue dot indicator
- [ ] "Optional" badge on advanced section
- [ ] Responsive grid layouts (md:grid-cols-2, md:grid-cols-3)
- [ ] Helper text in muted style
- [ ] Example text in italic
- [ ] Required asterisks in destructive color

### **Interaction Preservation**
- [ ] Multi-select for AI models works
- [ ] Collapsible advanced section
- [ ] Conditional citation style field
- [ ] Form validation on submit
- [ ] Field blur validation
- [ ] Tooltip hover behavior

### **Dynamic Rules Preservation**
```
Template-Specific Logic:
1. If tone = 'academic' ‚Üí Suggest citationNeeded = true
2. If experienceLevel = 'beginner' ‚Üí Limit clarityLevel to 'simple' or 'standard'
3. If aiModels includes 'claude-3-opus' ‚Üí Show platformVersion field
4. If citationNeeded = true ‚Üí Show citation style selector
5. If useCaseCategory = 'coding' ‚Üí Default outputFormat to 'code'
```

---

## üîç Design Drift Checkpoints

### **Critical Elements to Verify**

1. **Field Order Integrity**
   ```
   Expected sequence:
   1. Prompt Basics (2 fields)
   2. Target Audience (2 fields)
   3. Output Style (3 fields)
   4. AI Models (5 fields)
   5. Advanced (3 fields)
   Total: 15 Template fields
   ```

2. **Visual Consistency**
   - Section spacing: gap-6 between cards
   - Field spacing: space-y-4 within sections
   - Grid breakpoint: md:grid-cols-2 for audience section
   - Grid breakpoint: md:grid-cols-3 for output style

3. **Color Variables**
   - Dot indicator: var(--primary)
   - Required asterisk: var(--destructive)
   - Helper text: var(--muted-foreground)
   - Card background: var(--card)

4. **Typography Hierarchy**
   - Section headers: text-lg font-semibold
   - Field labels: text-sm font-medium
   - Helper text: text-xs text-muted-foreground
   - Example text: italic

---

## üîÑ Migration Sequence

### **Phase 1: Structure Setup**
1. Create TemplateForm component wrapper
2. Import necessary UI components
3. Set up form context connection

### **Phase 2: Field Migration**
1. Move Prompt Basics section (goal, keyOffer)
2. Move Target Audience section (audience, tone)
3. Move Output Style section (industry, experienceLevel, outputFormat)
4. Move AI Models section (aiModels, platformVersion, useCaseCategory, finalOutputFormat, audienceSensitivity)
5. Move Advanced section (citationNeeded, rubricMode, clarityLevel)

### **Phase 3: Logic Migration**
1. Extract Template-specific validation rules
2. Move conditional rendering logic
3. Preserve dynamic field interactions
4. Connect to parent form state

### **Phase 4: Verification**
1. Visual regression test
2. Field order verification
3. Tooltip functionality check
4. Validation rule testing
5. Dynamic behavior confirmation

---

## üö¶ Migration Status Indicators

### **Green Light (Ready to Proceed)**
- All fields documented ‚úì
- Validation rules mapped ‚úì
- Dynamic logic identified ‚úì
- Visual specs captured ‚úì

### **Yellow Light (Caution Points)**
- Complex conditional logic in AI models section
- Multi-select component state management
- Citation field conditional rendering

### **Red Light (Blockers)**
- None identified

---

## üìä Post-Migration Verification

### **Automated Checks**
- [ ] All 15 Template fields render
- [ ] Field IDs are unique
- [ ] Form submission includes all field values
- [ ] Validation messages appear correctly
- [ ] No console errors

### **Manual Checks**
- [ ] Visual appearance identical to v1.5
- [ ] Tooltips display on hover
- [ ] Multi-select works smoothly
- [ ] Advanced section collapses/expands
- [ ] Field validation on blur

### **Regression Tests**
- [ ] Submit with all fields filled
- [ ] Submit with only required fields
- [ ] Submit with invalid data (triggers validation)
- [ ] Mode switching doesn't lose data
- [ ] Browser refresh maintains form state

---

## ‚úÖ Template Subcomponent Status

**Component Name:** TemplateForm.tsx  
**Estimated Lines:** ~500  
**Field Count:** 15  
**Sections:** 5  
**Validation Rules:** 8  
**Dynamic Rules:** 5  
**Status:** STAGED FOR EXTRACTION

---

**Last Updated:** October 18, 2025  
**Migration Owner:** Component Refactor Team  
**Review Required:** Yes

---

## üéØ Agent Mode Extraction Checklist

### **Pre-Migration Verification**
- [ ] Capture screenshot of current Agent mode UI
- [ ] Document all 6 Agent-specific fields
- [ ] Map conditional rendering rules
- [ ] List all tooltip texts
- [ ] Record field validation states
- [ ] Note all helper text content
- [ ] Document section organization

---

## üìù Agent Mode Field Preservation Map

### **Section 1: Agent Identity**
```
Fields to Extract:
1. title* (required)
   - Label: "Agent Title"
   - Helper: "Name or role of this AI agent"
   - Example: "e.g., Data Analyst Expert, Creative Writing Assistant..."
   - Validation: min(5), max(200)
   - Tooltip: Present

2. agentName (optional, NEW v1.5)
   - Label: "Agent Name"
   - Helper: "Give your agent a unique name"
   - Example: "e.g., Dr. Data, CodeMaster 3000..."
   - Validation: min(2), max(50)
   - Tooltip: Present
```

### **Section 2: Agent Personality & Context**
```
Fields to Extract:
3. agentContext* (required)
   - Label: "Agent Context & Background"
   - Helper: "Describe the agent's expertise and perspective"
   - Example: "e.g., You are a senior software engineer with 10 years of experience..."
   - Validation: min(20), max(1000)
   - Component: Textarea (rows: 6)
   - Tooltip: Present

4. personalityStyle (select, optional, NEW v1.5)
   - Label: "Personality Style"
   - Helper: "How should the agent communicate?"
   - Options: professional, friendly-approachable, analytical, creative-imaginative, mentor-teacher, direct-efficient
   - Default: professional
   - Tooltip: Present
```

### **Section 3: Agent Capabilities**
```
Fields to Extract:
5. capabilities (optional)
   - Label: "Capabilities"
   - Helper: "What can this agent do?"
   - Example: "e.g., Analyze complex datasets, Generate visualizations..."
   - Validation: min(10), max(500)
   - Component: Textarea (rows: 4)
   - Tooltip: Present

6. constraints (optional)
   - Label: "Constraints & Limitations"
   - Helper: "What should this agent NOT do?"
   - Example: "e.g., Cannot provide medical advice, Must cite sources..."
   - Validation: min(10), max(500)
   - Component: Textarea (rows: 4)
   - Tooltip: Present
```

### **Section 4: Trust & Safety (Shared)**
```
Inherited from parent:
- Trust scoring panel
- Safety settings
- Content filtering
- Same visual treatment as Template mode
```

---

## ‚úÖ Agent Mode Acceptance Criteria

### **Visual Preservation**
- [ ] Card component with p-6 padding maintained
- [ ] Section header with green dot indicator (Agent-specific)
- [ ] Helper text in muted style
- [ ] Example text in italic
- [ ] Required asterisks in destructive color
- [ ] Textarea components maintain proper sizing

### **Interaction Preservation**
- [ ] Personality style dropdown works
- [ ] Textarea auto-resize behavior
- [ ] Form validation on submit
- [ ] Field blur validation
- [ ] Tooltip hover behavior
- [ ] Character count indicators (if present)

### **Dynamic Rules Preservation**
```
Agent-Specific Logic:
1. If personalityStyle = 'professional' ‚Üí Validate formal tone in agentContext
2. If constraints provided ‚Üí Check no contradiction with capabilities
3. If agentName empty ‚Üí Use title as fallback display
4. If personalityStyle = 'mentor-teacher' ‚Üí Suggest educational capabilities
5. Character limit warnings at 80% threshold
```

---

## üîç Agent Mode Design Drift Checkpoints

### **Critical Elements to Verify**

1. **Field Order Integrity**
   ```
   Expected sequence:
   1. Agent Identity (2 fields)
   2. Personality & Context (2 fields)
   3. Capabilities (2 fields)
   Total: 6 Agent fields
   ```

2. **Visual Consistency**
   - Section spacing: gap-6 between cards
   - Field spacing: space-y-4 within sections
   - Textarea sizing: Consistent rows attribute
   - No grid layouts (all fields full-width)

3. **Component Types**
   - Input fields: title, agentName
   - Select: personalityStyle
   - Textareas: agentContext, capabilities, constraints
   - All maintain original sizing

4. **Agent-Specific Styling**
   - Green dot for section headers (vs blue for Template)
   - Consistent textarea borders
   - Proper placeholder text opacity

---

## üîÑ Agent Mode Migration Sequence

### **Phase 1: Component Setup**
1. Create AgentForm component wrapper
2. Import necessary UI components
3. Setup Agent-specific validation

### **Phase 2: Field Migration**
1. Move Agent Identity section (title, agentName)
2. Move Personality section (agentContext, personalityStyle)
3. Move Capabilities section (capabilities, constraints)
4. Connect Trust & Safety panel

### **Phase 3: Logic Migration**
1. Extract Agent-specific validation rules
2. Move personality-based logic
3. Preserve textarea behaviors
4. Connect to parent form state

### **Phase 4: Verification**
1. Visual regression test
2. Field order verification
3. Dropdown functionality check
4. Textarea resize testing
5. Validation rule testing

---

## ‚úÖ Agent Subcomponent Status

**Component Name:** AgentForm.tsx  
**Estimated Lines:** ~400  
**Field Count:** 6  
**Sections:** 3  
**Validation Rules:** 4  
**Dynamic Rules:** 5  
**Status:** STAGED FOR EXTRACTION

---

**Last Updated:** October 18, 2025  
**Migration Owner:** Component Refactor Team  
**Review Required:** Yes
---

## ‚úÖ Field Deprecation: outputContentType

**Field Deprecated:** outputContentType  
**Aliased To:** finalOutputFormat  
**Date:** October 18, 2025  
**Status:** COMPLETED  

### Migration Details
- **UI Change:** Field hidden from TrustSafetyPanel (render=false)
- **Schema:** Marked as deprecated with @aliasOf annotation
- **IO Mapping:** 
  - On Load: Legacy outputContentType maps to finalOutputFormat
  - On Save: outputContentType removed from payload
- **Validation:** Removed all outputContentType validators
- **Section Order:** Preserved - no UI reordering

### Testing Verification
- [x] Legacy payloads with outputContentType auto-migrate
- [x] New saves exclude outputContentType
- [x] Trust & Safety panel maintains position
- [x] finalOutputFormat remains required and functional
